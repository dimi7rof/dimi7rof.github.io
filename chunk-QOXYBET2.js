import{a as I,b as N,c as R,d as z,e as j,f as G,g as V,h as A}from"./chunk-EF6FNLXA.js";import{b as F,c as T,d as D,j as P}from"./chunk-WPE5LOYE.js";import{Da as _,V as y,W as S,Xa as p,Ya as r,Za as l,cb as x,fb as h,hb as g,jb as c,mb as M,nb as v,ob as O,pa as m,pb as w,rb as B,sb as E,ua as C,ya as b}from"./chunk-JSLTKH6X.js";import"./chunk-KAT7YFEL.js";function J(s,a){if(s&1){let u=x();r(0,"input",16),h("ngModelChange",function(e){let i=y(u).index,n=g().index,o=g();return S(o.onInput(e,n,i))}),l()}if(s&2){let u=a.index,t=g().index,e=g();p("readonly",!e.isEditable(t,u))("ngModel",e.board[t][u]===0?"":e.board[t][u])}}function W(s,a){if(s&1&&(r(0,"div",14),_(1,J,1,2,"input",15),l()),s&2){let u=a.$implicit;m(),p("ngForOf",u)}}function L(s,a){if(s&1&&(r(0,"li"),c(1),B(2,"date"),l()),s&2){let u=a.$implicit;m(),M(" ",E(2,3,u.date,"short")," - ",u.difficulty," - ",u.time,"s ")}}var X=(()=>{let a=class a{constructor(t){this.router=t,this.board=[],this.difficulty="easy",this.results=[],this.startTime=0}ngOnInit(){this.loadResults(),this.loadBoard(),(!this.board||this.board.length===0)&&this.newGame(),this.startTime=Date.now()}generateSudokuPuzzle(t){let i=this.generateFullBoard().map(o=>[...o]),n=t==="easy"?35:t==="medium"?45:55;for(;n>0;){let o=Math.floor(Math.random()*9),f=Math.floor(Math.random()*9);i[o][f]!==0&&(i[o][f]=0,n--)}return i}onDifficultyChange(){this.newGame()}newGame(){this.board=this.generateSudokuPuzzle(this.difficulty),this.saveBoard(),this.startTime=Date.now()}saveBoard(){localStorage.setItem("sudokuBoard",JSON.stringify(this.board)),localStorage.setItem("sudokuDifficulty",this.difficulty)}loadBoard(){let t=localStorage.getItem("sudokuBoard"),e=localStorage.getItem("sudokuDifficulty");t&&(this.board=JSON.parse(t)),e&&(this.difficulty=e)}saveResult(){let t=Math.floor((Date.now()-this.startTime)/1e3);this.results.push({date:new Date().toISOString(),difficulty:this.difficulty,time:t}),localStorage.setItem("sudokuResults",JSON.stringify(this.results))}loadResults(){let t=localStorage.getItem("sudokuResults");t&&(this.results=JSON.parse(t))}generateFullBoard(){let t=Array.from({length:9},()=>Array(9).fill(0));return this.fillBoard(t,0,0),t}fillBoard(t,e,i){if(e===9)return!0;let n=i===8?e+1:e,o=i===8?0:i+1,f=[1,2,3,4,5,6,7,8,9].sort(()=>Math.random()-.5);for(let d of f)if(this.isSafe(t,e,i,d)){if(t[e][i]=d,this.fillBoard(t,n,o))return!0;t[e][i]=0}return!1}isSafe(t,e,i,n){for(let d=0;d<9;d++)if(t[e][d]===n||t[d][i]===n)return!1;let o=Math.floor(e/3)*3,f=Math.floor(i/3)*3;for(let d=0;d<3;d++)for(let k=0;k<3;k++)if(t[o+d][f+k]===n)return!1;return!0}isEditable(t,e){return this.board[t][e]===0}onInput(t,e,i){let n=Number(t.target.value);n>=1&&n<=9?(this.board[e][i]=n,this.saveBoard(),this.isCompleted()&&(this.saveResult(),alert("Congratulations! You solved the puzzle."))):(this.board[e][i]=0,this.saveBoard())}isCompleted(){for(let t=0;t<9;t++)for(let e=0;e<9;e++)if(this.board[t][e]===0||!this.isSafe(this.board,t,e,this.board[t][e]))return!1;return!0}back(){this.router.navigate(["/"])}};a.\u0275fac=function(e){return new(e||a)(C(P))},a.\u0275cmp=b({type:a,selectors:[["sudoku"]],decls:23,vars:3,consts:[[1,"wrapper"],[1,"sudoku-board"],["class","sudoku-row",4,"ngFor","ngForOf"],[1,"sudoku-header"],["for","difficulty"],["id","difficulty",3,"ngModelChange","change","ngModel"],["value","easy"],["value","medium"],["value","hard"],[3,"click"],[1,"sudoku-results"],[4,"ngFor","ngForOf"],[1,"wrapper","back"],[1,"back-btn",3,"click"],[1,"sudoku-row"],["class","sudoku-cell","maxlength","1","type","text",3,"readonly","ngModel","ngModelChange",4,"ngFor","ngForOf"],["maxlength","1","type","text",1,"sudoku-cell",3,"ngModelChange","readonly","ngModel"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1),_(2,W,2,1,"div",2),l()(),r(3,"div",3)(4,"label",4),c(5,"Difficulty:"),l(),r(6,"select",5),w("ngModelChange",function(o){return O(i.difficulty,o)||(i.difficulty=o),o}),h("change",function(){return i.onDifficultyChange()}),r(7,"option",6),c(8,"Easy"),l(),r(9,"option",7),c(10,"Medium"),l(),r(11,"option",8),c(12,"Hard"),l()(),r(13,"button",9),h("click",function(){return i.newGame()}),c(14,"New Game"),l()(),r(15,"div",10)(16,"h3"),c(17,"Game Results"),l(),r(18,"ul"),_(19,L,3,6,"li",11),l()(),r(20,"section",12)(21,"button",13),h("click",function(){return i.back()}),c(22,"Back"),l()()),e&2&&(m(2),p("ngForOf",i.board),m(4),v("ngModel",i.difficulty),m(13),p("ngForOf",i.results))},dependencies:[D,F,A,j,G,I,z,N,V,R,T],styles:[".sudoku-board[_ngcontent-%COMP%]{display:inline-block;border:4px solid #222;margin:16px 0;background:#fff}.sudoku-row[_ngcontent-%COMP%]{display:flex}.sudoku-cell[_ngcontent-%COMP%]{width:32px;height:32px;text-align:center;font-size:18px;border:1px solid #999;outline:none;box-sizing:border-box;background:#f9f9f9}.sudoku-cell[_ngcontent-%COMP%]:nth-child(3n){border-right:3px solid #222}.sudoku-cell[_ngcontent-%COMP%]:nth-child(1){border-left:3px solid #222}.sudoku-row[_ngcontent-%COMP%]:nth-child(3n)   .sudoku-cell[_ngcontent-%COMP%]{border-bottom:3px solid #222}.sudoku-row[_ngcontent-%COMP%]:nth-child(1)   .sudoku-cell[_ngcontent-%COMP%]{border-top:3px solid #222}"]});let s=a;return s})();export{X as SudokuComponent};
